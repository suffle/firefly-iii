"use strict";(self["webpackChunkfirefly_iii"]=self["webpackChunkfirefly_iii"]||[]).push([[7544],{7544:(e,t,a)=>{a.r(t),a.d(t,{default:()=>_});var n=a(9835);const r=(0,n._)("p",null," ",-1),i=(0,n._)("p",null," ",-1),s=(0,n._)("p",null," ",-1),l=(0,n._)("p",null," ",-1);function o(e,t,a,o,g,u){const p=(0,n.up)("LargeTable"),c=(0,n.up)("q-fab-action"),d=(0,n.up)("q-fab"),f=(0,n.up)("q-page-sticky"),m=(0,n.up)("q-page");return(0,n.wg)(),(0,n.j4)(m,null,{default:(0,n.w5)((()=>[(0,n.Wm)(p,{ref:"table",title:e.$t("firefly.title_"+this.type),rows:g.rows,loading:g.loading,onOnRequest:u.onRequest,"rows-number":g.rowsNumber,"rows-per-page":g.rowsPerPage,page:g.page},null,8,["title","rows","loading","onOnRequest","rows-number","rows-per-page","page"]),r,i,s,l,(0,n.Wm)(f,{position:"bottom-right",offset:[18,18]},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{label:"Actions",square:"","vertical-actions-align":"right","label-position":"left",color:"green",icon:"fas fa-chevron-up",direction:"up"},{default:(0,n.w5)((()=>[(0,n.Wm)(c,{color:"primary",square:"",to:{name:"transactions.create",params:{type:"transfer"}},icon:"fas fa-exchange-alt",label:"New transfer"},null,8,["to"]),(0,n.Wm)(c,{color:"primary",square:"",to:{name:"transactions.create",params:{type:"deposit"}},icon:"fas fa-long-arrow-alt-right",label:"New deposit"},null,8,["to"]),(0,n.Wm)(c,{color:"primary",square:"",to:{name:"transactions.create",params:{type:"withdrawal"}},icon:"fas fa-long-arrow-alt-left",label:"New withdrawal"},null,8,["to"])])),_:1})])),_:1})])),_:1})}var g=a(1049),u=a(1569);class p{list(e,t,a){let n="api/v1/transactions";return u.api.get(n,{params:{page:t,cache:a,type:e}})}}var c=a(8925),d=a(3247);const f={name:"Index",components:{LargeTable:c.Z},watch:{$route(e){"transactions.index"===e.name&&(this.type=e.params.type,this.page=1,this.triggerUpdate())}},data(){return{loading:!1,rows:[],columns:[{name:"type",label:" ",field:"type",style:"width: 30px"},{name:"description",label:"Description",field:"description",align:"left"},{name:"amount",label:"Amount",field:"amount"},{name:"date",label:"Date",field:"date",align:"left"},{name:"source",label:"Source",field:"source",align:"left"},{name:"destination",label:"Destination",field:"destination",align:"left"},{name:"category",label:"Category",field:"category",align:"left"},{name:"budget",label:"Budget",field:"budget",align:"left"},{name:"menu",label:" ",field:"menu",align:"left"}],type:"withdrawal",page:1,rowsPerPage:50,rowsNumber:100,range:{start:null,end:null}}},computed:{...(0,g.Se)("fireflyiii",["getRange","getCacheKey","getListPageSize"])},created(){this.rowsPerPage=this.getListPageSize},mounted(){if(this.type=this.$route.params.type,null===this.getRange.start||null===this.getRange.end){const e=(0,g.oR)();e.subscribe(((e,t)=>{"fireflyiii/setRange"===e.type&&(this.range={start:e.payload.start,end:e.payload.end},this.triggerUpdate())}))}null!==this.getRange.start&&null!==this.getRange.end&&(this.range={start:this.getRange.start,end:this.getRange.end},this.triggerUpdate())},methods:{onRequest:function(e){this.page=e.page,this.triggerUpdate()},formatAmount:function(e,t){return Intl.NumberFormat("en-US",{style:"currency",currency:e}).format(t)},gotoTransaction:function(e,t){this.$router.push({name:"transactions.show",params:{id:1}})},triggerUpdate:function(){if(this.loading)return;if(null===this.range.start||null===this.range.end)return;this.loading=!0;const e=new p,t=new d.Z;this.rows=[],e.list(this.type,this.page,this.getCacheKey).then((e=>{let a=t.parseResponse(e);this.rowsPerPage=a.rowsPerPage,this.rowsNumber=a.rowsNumber,this.rows=a.rows,this.loading=!1}))}}};var m=a(1639),h=a(9885),w=a(3388),b=a(9361),y=a(935),P=a(9984),R=a.n(P);const q=(0,m.Z)(f,[["render",o]]),_=q;R()(f,"components",{QPage:h.Z,QPageSticky:w.Z,QFab:b.Z,QFabAction:y.Z})}}]);