"use strict";(self["webpackChunkfirefly_iii"]=self["webpackChunkfirefly_iii"]||[]).push([[8907],{8907:(e,s,t)=>{t.r(s),t.d(s,{default:()=>V});var r=t(9835),a=t(6970);const i={class:"row q-mx-md"},o={class:"col-12"},n={class:"row q-mx-md q-mt-md"},l={class:"col-12"},d=(0,r._)("div",{class:"text-h6"},"Edit category",-1),u={class:"row"},c={class:"col-12 q-mb-xs"},m={class:"row q-mx-md"},h={class:"col-12"},p={class:"row"},b={class:"col-12 text-right"},g={class:"row"},f={class:"col-12 text-right"};function w(e,s,t,w,_,v){const y=(0,r.up)("q-btn"),C=(0,r.up)("q-banner"),q=(0,r.up)("q-card-section"),E=(0,r.up)("q-input"),k=(0,r.up)("q-card"),x=(0,r.up)("q-checkbox"),S=(0,r.up)("q-page");return(0,r.wg)(),(0,r.j4)(S,null,{default:(0,r.w5)((()=>[(0,r._)("div",i,[(0,r._)("div",o,[""!==_.errorMessage?((0,r.wg)(),(0,r.j4)(C,{key:0,"inline-actions":"",rounded:"",class:"bg-orange text-white"},{action:(0,r.w5)((()=>[(0,r.Wm)(y,{flat:"",onClick:v.dismissBanner,label:"Dismiss"},null,8,["onClick"])])),default:(0,r.w5)((()=>[(0,r.Uk)((0,a.zw)(_.errorMessage)+" ",1)])),_:1})):(0,r.kq)("",!0)])]),(0,r._)("div",n,[(0,r._)("div",l,[(0,r.Wm)(k,{bordered:""},{default:(0,r.w5)((()=>[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[d])),_:1}),(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[(0,r._)("div",u,[(0,r._)("div",c,[(0,r.Wm)(E,{"error-message":_.submissionErrors.name,error:_.hasSubmissionErrors.name,"bottom-slots":"",disable:v.disabledInput,type:"text",clearable:"",modelValue:_.name,"onUpdate:modelValue":s[0]||(s[0]=e=>_.name=e),label:e.$t("form.name"),outlined:""},null,8,["error-message","error","disable","modelValue","label"])])])])),_:1})])),_:1})])]),(0,r._)("div",m,[(0,r._)("div",h,[(0,r.Wm)(k,{class:"q-mt-xs"},{default:(0,r.w5)((()=>[(0,r.Wm)(q,null,{default:(0,r.w5)((()=>[(0,r._)("div",p,[(0,r._)("div",b,[(0,r.Wm)(y,{disable:v.disabledInput,color:"primary",label:"Update",onClick:v.submitCategory},null,8,["disable","onClick"])])]),(0,r._)("div",g,[(0,r._)("div",f,[(0,r.Wm)(x,{disable:v.disabledInput,modelValue:_.doReturnHere,"onUpdate:modelValue":s[1]||(s[1]=e=>_.doReturnHere=e),"left-label":"",label:"Return here"},null,8,["disable","modelValue"])])])])),_:1})])),_:1})])])])),_:1})}var _=t(4255),v=t(1569);class y{post(e,s){let t="/api/v1/categories/"+e;return v.api.put(t,s)}}const C={name:"Edit",data(){return{submissionErrors:{},hasSubmissionErrors:{},submitting:!1,doReturnHere:!1,doResetForm:!1,errorMessage:"",type:"",id:0,name:""}},computed:{disabledInput:function(){return this.submitting}},created(){this.id=parseInt(this.$route.params.id),this.collectCategory()},methods:{collectCategory:function(){let e=new _.Z;e.get(this.id).then((e=>this.parseCategory(e)))},parseCategory:function(e){this.name=e.data.data.attributes.name},resetErrors:function(){this.submissionErrors={name:""},this.hasSubmissionErrors={name:!1}},submitCategory:function(){this.submitting=!0,this.errorMessage="",this.resetErrors();const e=this.buildCategory();let s=new y;s.post(this.id,e).catch(this.processErrors).then(this.processSuccess)},buildCategory:function(){return{name:this.name}},dismissBanner:function(){this.errorMessage=""},processSuccess:function(e){if(this.$store.dispatch("fireflyiii/refreshCacheKey"),!e)return;this.submitting=!1;let s={level:"success",text:"Category is updated",show:!0,action:{show:!0,text:"Go to category",link:{name:"categories.show",params:{id:parseInt(e.data.data.id)}}}};this.$q.localStorage.set("flash",s),this.doReturnHere&&window.dispatchEvent(new CustomEvent("flash",{detail:{flash:this.$q.localStorage.getItem("flash")}})),this.doReturnHere||this.$router.go(-1)},processErrors:function(e){if(e.response){let s=e.response.data;this.errorMessage=s.message,console.log(s);for(let e in s.errors)s.errors.hasOwnProperty(e)&&(this.submissionErrors[e]=s.errors[e][0],this.hasSubmissionErrors[e]=!0)}this.submitting=!1}}};var q=t(1639),E=t(9885),k=t(7128),x=t(8879),S=t(4458),W=t(3190),Z=t(6611),I=t(1221),Q=t(9984),R=t.n(Q);const M=(0,q.Z)(C,[["render",w]]),V=M;R()(C,"components",{QPage:E.Z,QBanner:k.Z,QBtn:x.Z,QCard:S.Z,QCardSection:W.Z,QInput:Z.Z,QCheckbox:I.Z})}}]);