"use strict";(self["webpackChunkfirefly_iii"]=self["webpackChunkfirefly_iii"]||[]).push([[7586],{7586:(s,e,t)=>{t.r(e),t.d(e,{default:()=>R});var i=t(9835),r=t(6970);const a={class:"row q-mx-md"},n={class:"col-12"},o={class:"row q-mx-md q-mt-md"},l={class:"col-12"},d=(0,i._)("div",{class:"text-h6"},"Edit piggy bank",-1),u={class:"row"},c={class:"col-12 q-mb-xs"},m={class:"row q-mx-md"},h={class:"col-12"},g={class:"row"},p={class:"col-12 text-right"},b={class:"row"},f={class:"col-12 text-right"};function w(s,e,t,w,k,_){const y=(0,i.up)("q-btn"),v=(0,i.up)("q-banner"),q=(0,i.up)("q-card-section"),E=(0,i.up)("q-input"),x=(0,i.up)("q-card"),B=(0,i.up)("q-checkbox"),C=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(C,null,{default:(0,i.w5)((()=>[(0,i._)("div",a,[(0,i._)("div",n,[""!==k.errorMessage?((0,i.wg)(),(0,i.j4)(v,{key:0,"inline-actions":"",rounded:"",class:"bg-orange text-white"},{action:(0,i.w5)((()=>[(0,i.Wm)(y,{flat:"",onClick:_.dismissBanner,label:"Dismiss"},null,8,["onClick"])])),default:(0,i.w5)((()=>[(0,i.Uk)((0,r.zw)(k.errorMessage)+" ",1)])),_:1})):(0,i.kq)("",!0)])]),(0,i._)("div",o,[(0,i._)("div",l,[(0,i.Wm)(x,{bordered:""},{default:(0,i.w5)((()=>[(0,i.Wm)(q,null,{default:(0,i.w5)((()=>[d])),_:1}),(0,i.Wm)(q,null,{default:(0,i.w5)((()=>[(0,i._)("div",u,[(0,i._)("div",c,[(0,i.Wm)(E,{"error-message":k.submissionErrors.name,error:k.hasSubmissionErrors.name,"bottom-slots":"",disable:_.disabledInput,type:"text",clearable:"",modelValue:k.name,"onUpdate:modelValue":e[0]||(e[0]=s=>k.name=s),label:s.$t("form.name"),outlined:""},null,8,["error-message","error","disable","modelValue","label"])])])])),_:1})])),_:1})])]),(0,i._)("div",m,[(0,i._)("div",h,[(0,i.Wm)(x,{class:"q-mt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(q,null,{default:(0,i.w5)((()=>[(0,i._)("div",g,[(0,i._)("div",p,[(0,i.Wm)(y,{disable:_.disabledInput,color:"primary",label:"Update",onClick:_.submitPiggyBank},null,8,["disable","onClick"])])]),(0,i._)("div",b,[(0,i._)("div",f,[(0,i.Wm)(B,{disable:_.disabledInput,modelValue:k.doReturnHere,"onUpdate:modelValue":e[1]||(e[1]=s=>k.doReturnHere=s),"left-label":"",label:"Return here"},null,8,["disable","modelValue"])])])])),_:1})])),_:1})])])])),_:1})}var k=t(670),_=t(1569);class y{post(s,e){let t="/api/v1/piggy_banks/"+s;return _.api.put(t,e)}}const v={name:"Edit",data(){return{submissionErrors:{},hasSubmissionErrors:{},submitting:!1,doReturnHere:!1,doResetForm:!1,errorMessage:"",id:0,name:""}},computed:{disabledInput:function(){return this.submitting}},created(){this.id=parseInt(this.$route.params.id),this.collectPiggyBank()},methods:{collectPiggyBank:function(){let s=new k.Z;s.get(this.id).then((s=>this.parsePiggyBank(s)))},parsePiggyBank:function(s){this.name=s.data.data.attributes.name},resetErrors:function(){this.submissionErrors={name:""},this.hasSubmissionErrors={name:!1}},submitPiggyBank:function(){this.submitting=!0,this.errorMessage="",this.resetErrors();const s=this.buildPiggyBank();(new y).post(this.id,s).catch(this.processErrors).then(this.processSuccess)},buildPiggyBank:function(){return{name:this.name}},dismissBanner:function(){this.errorMessage=""},processSuccess:function(s){if(this.$store.dispatch("fireflyiii/refreshCacheKey"),!s)return;this.submitting=!1;let e={level:"success",text:"Piggy is updated",show:!0,action:{show:!0,text:"Go to piggy",link:{name:"piggy-banks.show",params:{id:parseInt(s.data.data.id)}}}};this.$q.localStorage.set("flash",e),this.doReturnHere&&window.dispatchEvent(new CustomEvent("flash",{detail:{flash:this.$q.localStorage.getItem("flash")}})),this.doReturnHere||this.$router.go(-1)},processErrors:function(s){if(s.response){let e=s.response.data;this.errorMessage=e.message,console.log(e);for(let s in e.errors)e.errors.hasOwnProperty(s)&&(this.submissionErrors[s]=e.errors[s][0],this.hasSubmissionErrors[s]=!0)}this.submitting=!1}}};var q=t(1639),E=t(9885),x=t(7128),B=t(8879),C=t(4458),P=t(3190),S=t(6611),W=t(1221),Z=t(9984),I=t.n(Z);const Q=(0,q.Z)(v,[["render",w]]),R=Q;I()(v,"components",{QPage:E.Z,QBanner:x.Z,QBtn:B.Z,QCard:C.Z,QCardSection:P.Z,QInput:S.Z,QCheckbox:W.Z})}}]);