"use strict";(self["webpackChunkfirefly_iii"]=self["webpackChunkfirefly_iii"]||[]).push([[6691],{6691:(e,s,r)=>{r.r(s),r.d(s,{default:()=>B});var t=r(9835),o=r(6970);const l={class:"row q-mx-md"},a={class:"col-12"},i={class:"row q-mx-md q-mt-md"},n={class:"col-12"},d=(0,t._)("div",{class:"text-h6"},"Edit currency",-1),c={class:"row"},u={class:"col-12 q-mb-xs"},m={class:"row"},b={class:"col-12 q-mb-xs"},h={class:"row"},p={class:"col-12 q-mb-xs"},f={class:"row q-mx-md"},y={class:"col-12"},g={class:"row"},w={class:"col-12 text-right"},_={class:"row"},v={class:"col-12 text-right"};function C(e,s,r,C,E,q){const x=(0,t.up)("q-btn"),k=(0,t.up)("q-banner"),V=(0,t.up)("q-card-section"),S=(0,t.up)("q-input"),W=(0,t.up)("q-card"),Z=(0,t.up)("q-checkbox"),I=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(I,null,{default:(0,t.w5)((()=>[(0,t._)("div",l,[(0,t._)("div",a,[""!==E.errorMessage?((0,t.wg)(),(0,t.j4)(k,{key:0,"inline-actions":"",rounded:"",class:"bg-orange text-white"},{action:(0,t.w5)((()=>[(0,t.Wm)(x,{flat:"",onClick:q.dismissBanner,label:"Dismiss"},null,8,["onClick"])])),default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(E.errorMessage)+" ",1)])),_:1})):(0,t.kq)("",!0)])]),(0,t._)("div",i,[(0,t._)("div",n,[(0,t.Wm)(W,{bordered:""},{default:(0,t.w5)((()=>[(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[d])),_:1}),(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[(0,t._)("div",c,[(0,t._)("div",u,[(0,t.Wm)(S,{"error-message":E.submissionErrors.name,error:E.hasSubmissionErrors.name,"bottom-slots":"",disable:q.disabledInput,type:"text",clearable:"",modelValue:E.name,"onUpdate:modelValue":s[0]||(s[0]=e=>E.name=e),label:e.$t("form.name"),outlined:""},null,8,["error-message","error","disable","modelValue","label"])])]),(0,t._)("div",m,[(0,t._)("div",b,[(0,t.Wm)(S,{"error-message":E.submissionErrors.code,error:E.hasSubmissionErrors.code,"bottom-slots":"",disable:q.disabledInput,type:"text",clearable:"",modelValue:E.code,"onUpdate:modelValue":s[1]||(s[1]=e=>E.code=e),label:e.$t("form.code"),outlined:""},null,8,["error-message","error","disable","modelValue","label"])])]),(0,t._)("div",h,[(0,t._)("div",p,[(0,t.Wm)(S,{"error-message":E.submissionErrors.symbol,error:E.hasSubmissionErrors.symbol,"bottom-slots":"",disable:q.disabledInput,type:"text",clearable:"",modelValue:E.symbol,"onUpdate:modelValue":s[2]||(s[2]=e=>E.symbol=e),label:e.$t("form.symbol"),outlined:""},null,8,["error-message","error","disable","modelValue","label"])])])])),_:1})])),_:1})])]),(0,t._)("div",f,[(0,t._)("div",y,[(0,t.Wm)(W,{class:"q-mt-xs"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,null,{default:(0,t.w5)((()=>[(0,t._)("div",g,[(0,t._)("div",w,[(0,t.Wm)(x,{disable:q.disabledInput,color:"primary",label:"Update",onClick:q.submitCurrency},null,8,["disable","onClick"])])]),(0,t._)("div",_,[(0,t._)("div",v,[(0,t.Wm)(Z,{disable:q.disabledInput,modelValue:E.doReturnHere,"onUpdate:modelValue":s[3]||(s[3]=e=>E.doReturnHere=e),"left-label":"",label:"Return here"},null,8,["disable","modelValue"])])])])),_:1})])),_:1})])])])),_:1})}var E=r(1484),q=r(1569);class x{post(e,s){let r="/api/v1/currencies/"+e;return q.api.put(r,s)}}const k={name:"Edit",data(){return{submissionErrors:{},hasSubmissionErrors:{},submitting:!1,doReturnHere:!1,doResetForm:!1,errorMessage:"",type:"",code:"",name:"",symbol:""}},computed:{disabledInput:function(){return this.submitting}},created(){this.code=this.$route.params.code,this.collectCurrency()},methods:{collectCurrency:function(){let e=new E.Z;e.get(this.code).then((e=>this.parseCurrency(e)))},parseCurrency:function(e){this.name=e.data.data.attributes.name,this.symbol=e.data.data.attributes.symbol},resetErrors:function(){this.submissionErrors={name:"",code:"",symbol:""},this.hasSubmissionErrors={name:!1,code:!1,symbol:!1}},submitCurrency:function(){this.submitting=!0,this.errorMessage="",this.resetErrors();const e=this.buildCurrency();let s=new x;s.post(this.code,e).catch(this.processErrors).then(this.processSuccess)},buildCurrency:function(){return{name:this.name,code:this.code,symbol:this.symbol}},dismissBanner:function(){this.errorMessage=""},processSuccess:function(e){if(this.$store.dispatch("fireflyiii/refreshCacheKey"),!e)return;this.submitting=!1;let s={level:"success",text:"Currency is updated",show:!0,action:{show:!0,text:"Go to currency",link:{name:"currencies.show",params:{code:e.data.data.code}}}};this.$q.localStorage.set("flash",s),this.doReturnHere&&window.dispatchEvent(new CustomEvent("flash",{detail:{flash:this.$q.localStorage.getItem("flash")}})),this.doReturnHere||this.$router.go(-1)},processErrors:function(e){if(e.response){let s=e.response.data;this.errorMessage=s.message,console.log(s);for(let e in s.errors)s.errors.hasOwnProperty(e)&&(this.submissionErrors[e]=s.errors[e][0],this.hasSubmissionErrors[e]=!0)}this.submitting=!1}}};var V=r(1639),S=r(9885),W=r(7128),Z=r(8879),I=r(4458),$=r(3190),Q=r(6611),R=r(1221),M=r(9984),U=r.n(M);const H=(0,V.Z)(k,[["render",C]]),B=H;U()(k,"components",{QPage:S.Z,QBanner:W.Z,QBtn:Z.Z,QCard:I.Z,QCardSection:$.Z,QInput:Q.Z,QCheckbox:R.Z})}}]);